<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<script src="angular/angular.min.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
		*{padding: 0;margin: 0}
		.pages{padding-bottom: 100px}
		.clearfix:after{clear: both;display: block;height: 0;content: ''}
		ul{list-style: none;}
		.box{position: fixed;bottom: 0;left: 0;width:100%;z-index: 1;background-color: #FFF}	
		.box ul li{float: left;width: 25%;text-align: center;font-size: 0}
		.box ul li img{width: 4rem;height: 4rem}
		.box ul li span{font-size: 2rem}
		.box ul li .has_red{color: red}
		.page4{background-color: #eee;font-size: 2rem;padding-bottom: 100px;position: relative;}
		.page4 ul li{margin-bottom: 1rem;background-color: #FFF;line-height: 2rem;padding: 1rem}
		.caozuo{height: 3rem;border-bottom: solid #ccc 1px}
		.info{margin-top: 1rem}
		.right{float: right;padding: 0 1px;color: #C81623}
		.choose-true{color: red}
		.emid{border: solid 1px orange;top: 0;bottom: 0;left: 0;right: 0;margin: auto;width: 70%;height: 10rem;position: absolute;background-color: #FFF;z-index: 2;text-align: center;}
		.emid input{width: 80%;margin: 3px 0}
		.page1 ul{margin: 5px;}
		.page1 ul li{float: left;width: 50%;padding: 15px;box-sizing:border-box;border: solid 1px #ccc;}
		.page1 ul li img{width: 100%;display: block;}
		.page1 ul li p,.car_des{font-size: 2rem;color: #999;}
		.page1 ul li span,.car_price{font-size: 2rem;color: #c81623;line-height: 3em}
		.price_box{height: 3em;}
		.btn,.btnbox{float: right;font-size: 2rem}
		.jia{float: right;}
		.btn button,.jia,.btnbox button{border-radius: 50%;padding: 10px;color: #FFF;background:#c81623;font-size: 2rem;outline: none;}
		.page3 li{border-bottom:1px solid #eee;padding: 15px }
		.page3 img{width: 88px;float: left;margin-left: 15px}
		.page3 li span{color:red;}
		</style>
	</head>
	<body ng-app="myApp" ng-controller="myCtrl">
		<div class="pages">
			<div ng-show="nowIndex==1" class="page1">
				<ul class="clearfix">
					<li ng-repeat="(key, value) in foods">
						<img src="imgs/wz1.jpg" alt="">
						<p>{{value.cot}}</p>
						<div class="price_box">
							<span>{{value.price}}</span>
							<button type="button" class="jia" ng-click="value.choosen=false;value.num=1" ng-show="value.choosen">+</button>
							<div class="btn" ng-show="!value.choosen">
								<button type="button" ng-click="delate($index)">-</button>
								<em>{{value.num}}</em>
								<button type="button" ng-click="addfoods($index)">+</button>
							</div>					
						</div>
					</li>
				</ul>
			</div>
			<div ng-show="nowIndex==2">page2</div>
			<div ng-show="nowIndex==3" class="page3">
				<h2>总数是：<span>{{count()}}</span>总价格是：<span>{{total()}}</span></h2>
				 <ul>
				 	<li ng-repeat="(key, value) in shoppingList track by $index">
				 		<img src="imgs/wz1.jpg" alt="">
				 		<p class="car_des"> {{ value.cot }}</p>
				 		<span class="car_price">{{ value.price }}</span>
				 		<p class="btnbox"> <button type="button" ng-click="car_del($index)">-</button><span>{{value.num }}</span><button type="button" ng-click="car_add($index)">+</button></p>
				 	</li>
				 </ul>
			</div>
			<div ng-show="nowIndex==4" class="page4">
				<ul>
					<li ng-repeat="(key, item) in info track by $index">
						<div class="caozuo">
							<span class="choose-{{item.bol}}" ng-click = 'fn($index)'>{{item.bol?'默认地址':'设为默认'}}</span>
							<span class="right" ng-click="del($index)" >删除</span>
							<span class="right" ng-click="edit($index)">编辑</span>
						</div>
						<div class="info">
							<p>{{ item.name }}&nbsp;&nbsp;{{ item.tel }}</p>
							<p>{{ item.address }}</p>
						</div>
					</li>
				</ul>
				<div class="emid" ng-show="showing">
					<label for="">姓名</label>
					<input ng-model = 'name'></input>
					<label for="">电话</label>
					<input ng-model = 'tel'></input>
					<label for="">地址</label>
					<input ng-model = 'address'></input><br>
					<button type="button" ng-click="finish()">完成</button>
				</div>
			</div>
		</div>
		<div class="box">
			<ul>
				<li ng-click = 'nowIndex=1'>
					<img src="imgs/1.png" alt="" ng-show="nowIndex!=1"><br>
					<img src="imgs/6.png" alt="" ng-show="nowIndex==1"><br>
					<span ng-class="{has_red:nowIndex==1}">优选圈</span>
				</li>
				<li ng-click = 'nowIndex=2' >
					<img src="imgs/2.png" alt="" ng-show="nowIndex!=2"><br>
					<img src="imgs/7.png" alt="" ng-show="nowIndex==2"><br>
					<span ng-class="{has_red:nowIndex==2}">游记</span>
				</li>	
				<li ng-click = 'check()' >
					<img src="imgs/3.png" alt="" ng-show="nowIndex!=3"><br>
					<img src="imgs/8.png" alt="" ng-show="nowIndex==3"><br>
					<span ng-class="{has_red:nowIndex==3}">购物车</span>
				</li>
				<li ng-click = 'nowIndex=4' >
					<img src="imgs/4.png" alt="" ng-show="nowIndex!=4"><br>
					<img src="imgs/9.png" alt="" ng-show="nowIndex==4"><br>
					<span ng-class="{has_red:nowIndex==4}">个人中心</span>
				</li>											
			</ul>
		</div>
	</body>
</html>
<script type="text/javascript">
	document.documentElement.style.fontSize=document.documentElement.clientWidth/47.625+"px";
	var app = angular.module('myApp', [])
	app.controller('myCtrl',function($scope){
		//page1
		$scope.foods = [
			{cot:'满减【琥珀桃仁165g】坚果特产休闲零食纸',price:'28',choosen:true,num:1,id:0},
			{cot:'旺旺王子牛奶2940ml原味245ml-8罐+果味245ml-4罐',price:'48',choosen:true,num:1,id:1},
			{cot:'最好吃的零食那就是旺仔薯片',price:'8',choosen:true,num:1,id:2},
			{cot:'江南皮革厂倒闭了，统统只要20元',price:'20',choosen:true,num:1,id:3}
		]
		$scope.delate = function(i){
			$scope.foods[i].num--;
			if($scope.foods[i].num==0){	
				$scope.foods[i].choosen = true
			}
		}
		$scope.addfoods = function(i){
			$scope.foods[i].num++;
		}
		//page3	
		$scope.shoppingList = []
		$scope.check = function(){
			$scope.shoppingList  = []
			$scope.nowIndex=3;
			$scope.foods.forEach(function(item){
				if(!item.choosen){
					console.log(item)
					$scope.shoppingList.push(item)
				}
			})
		}
		$scope.car_add = function(i){
			$scope.shoppingList[i].num++;
		}
		$scope.car_del = function(i){
			$scope.shoppingList[i].num--;
			if($scope.shoppingList[i].num==0){
				$scope.foods[$scope.shoppingList[i].id].choosen=true;
				$scope.shoppingList.splice(i,1)
			}
			//$scope.foods[$scope.shoppingList[i].id].num--
		}
		$scope.count = function(){
			var num = 0
			$scope.shoppingList.forEach(function(item){
				num+=item.num
			})
			return num
		}
		$scope.total = function(){
			var num = 0
			$scope.shoppingList.forEach(function(item){
				num+=item.num*item.price
			})
			return num+'元'			
		}
		//page4
		$scope.nowIndex = 3;
		$scope.imgBol = true;
		$scope.info = [
			{bol:true,name:'留几手',tel:110,address:'东北'},
			{bol:false,name:'冯提莫',tel:120,address:'重庆'},
			{bol:false,name:'陈一发',tel:119,address:'湖南'},
			{bol:false,name:'杀马特王子',tel:114,address:'河南'},
			{bol:false,name:'助手哥',tel:122,address:'杭州'}
		];
		$scope.del = function(i){
			$scope.info.splice(i,1);
			if(i==0){
				$scope.info[0].bol = true;
			}
		};
		$scope.edit = function(i){
			$scope.showing = true;
			$scope.name = $scope.info[i].name;
			$scope.tel = $scope.info[i].tel;
			$scope.address = $scope.info[i].address;
			$scope.currentIndex = i;
		}
		$scope.finish = function(){
			$scope.showing = false;
			$scope.info[$scope.currentIndex].name = $scope.name;
			$scope.info[$scope.currentIndex].tel = $scope.tel;
			$scope.info[$scope.currentIndex].address = $scope.address;
		}
		$scope.fn = function(i){
			var temp = $scope.info[i];
			$scope.info.splice(i,1);
			$scope.info.unshift(temp);
			$scope.info.forEach(function(item){
				item.bol = false;
			})
			$scope.info[0].bol = true;
		}
	})
</script>