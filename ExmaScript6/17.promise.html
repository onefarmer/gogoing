<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script>
    // 解决Es5 地狱回调函数
    let state = true;
    // resolve 解决， 拒绝 reject
    function start(resolve,reject){
        console.log('开始');
        if(state){
            resolve('准备开始')
        }else{
            reject('未准备')
        }
    }
    function middle(resolve,reject){
        if(state){
            resolve('过程中')
        }else{
            reject('过程中断')
        }
    }    
    function end(resolve,reject){
        if(state){
            resolve('结束')
        }else{
            reject('结束失败')
        }
    }
    new Promise(start).then(function(val){
        console.log(val)
        return new Promise(middle)
    }).then( val => {
        console.log(val)
        return new Promise(end)       
    }).then( val => console.log(`${val}-----------完成所有`))
</script>
</body>
</html>